<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>NWC Point of Sale: Nostr Wallet Connect Point of Sale Device</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">NWC Point of Sale<span id="projectnumber">&#160;v1.0.0</span>
   </div>
   <div id="projectbrief">Nostr Wallet Connect Point of Sale device for ESP32 with Lightning Network payments</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Nostr Wallet Connect Point of Sale Device </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md_README"></a> A Bitcoin Lightning point of Sale Device that uses <a class="el" href="namespace_n_w_c.html">NWC</a> for wallet communications</p>
<h1><a class="anchor" id="autotoc_md1"></a>
Overview</h1>
<p>This is a Bitcoin Lightning Network point of sale device built for the Guition JC3248W535 3.5" ESP32-S3 development board with touch screen display. The device enables Bitcoin payments using Nostr Wallet Connect (NWC) protocol for wallet communications.

@section autotoc_md2 Features

- &lt;strong&gt;Lightning Network Payments&lt;/strong&gt;: Accept Bitcoin payments via Lightning Network
- &lt;strong&gt;Touch Screen Interface&lt;/strong&gt;: 320x480 color touchscreen
- &lt;strong&gt;Nostr Wallet Connect&lt;/strong&gt;: Wallet communication using NWC protocol
- &lt;strong&gt;Multi-Currency Support&lt;/strong&gt;: USD, EUR, GBP, CAD, CHF, AUD, JPY, CNY with automatic Bitcoin price conversion
- &lt;strong&gt;WiFi Setup&lt;/strong&gt;: Easy configuration on device with AP mode for NWC pairing code setup
- &lt;strong&gt;PIN Protection&lt;/strong&gt;: Secure access to settings and configuration
- &lt;strong&gt;Power Management&lt;/strong&gt;: Light sleep after a short period of inactivity and deep sleep mode after a longer period of inactivity  &lt;br&gt;
- &lt;strong&gt;QR Code Display&lt;/strong&gt;: Shows Lightning invoices for customer payments

@section autotoc_md3 Hardware Requirements

- Guition JC3248W535 3.5" ESP32-S3 development board with touch screen display (320x480)</p><ul>
<li>Power supply (USB or battery)</li>
</ul>
<h1><a class="anchor" id="autotoc_md4"></a>
Getting Started</h1>
<h2><a class="anchor" id="autotoc_md5"></a>
Prerequisites</h2>
<ul>
<li><a href="https://platformio.org/">PlatformIO</a> installed</li>
<li>Guition JC3248W535 3.5" touch screen display (320x480)

@subsection autotoc_md6 Building and Flashing

@icode{bash} 
# Clone the repository
git clone &lt;repository-url&gt;
cd nwc-pos

# Build the project
pio run

# Upload to device
pio run --target upload

# Monitor serial output
pio device monitor
@endicode

@subsection autotoc_md7 Documentation

@icode{bash} 
# Generate documentation
pio run -t docs
@endicode


@subsection autotoc_md8 Initial Setup

1. Power on the device
2. Enter settings using the Settings icon at the bottom left corner of the keypad
3. Enter WiFi settings and connect to your WiFi network
4. In your NWC compatible wallet, create a new connection and copy the pairing code to your clip board
1. In settings, enable the NWC Pairing Code settings, use the default pin code "1234"
3. Connect to the WiFi AP created by the device and open the portal in your browser
4. Paste the pairing code you copied from your wallet
5. Set a new PIN number using the default pin code "1234"</li>
</ul>
<ol type="1">
<li>Start accepting payments</li>
</ol>
<h1><a class="anchor" id="autotoc_md9"></a>
Architecture</h1>
<p>The application uses a modular architecture with the following components:</p>
<ul>
<li><b><a class="el" href="namespace_app.html">App</a></b>: Central coordinator managing all modules</li>
<li><b><a class="el" href="namespace_display.html">Display</a></b>: LVGL-based <a class="el" href="namespace_u_i.html">UI</a> with LovyanGFX driver</li>
<li><b>WiFi</b>: Network connectivity management</li>
<li><b><a class="el" href="namespace_n_w_c.html">NWC</a></b>: Nostr Wallet Connect protocol implementation</li>
<li><b><a class="el" href="namespace_settings.html">Settings</a></b>: Persistent configuration storage</li>
<li><b><a class="el" href="namespace_u_i.html">UI</a></b>: User interface screens and interactions</li>
</ul>
<h1><a class="anchor" id="autotoc_md10"></a>
Development</h1>
<p>Built with:</p><ul>
<li>PlatformIO Arduino framework</li>
<li>LVGL graphics library</li>
<li>LovyanGFX display driver</li>
<li>Nostr protocol implementation</li>
<li>WebSocket communication</li>
</ul>
<h1><a class="anchor" id="autotoc_md11"></a>
License</h1>
<p>MIT License </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
