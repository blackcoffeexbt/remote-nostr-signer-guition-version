\hypertarget{nwc_8h}{}\doxysection{src/nwc.h File Reference}
\label{nwc_8h}\index{src/nwc.h@{src/nwc.h}}
{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$Web\+Sockets\+Client.\+h$>$}\newline
{\ttfamily \#include $<$Arduino\+Json.\+h$>$}\newline
{\ttfamily \#include $<$HTTPClient.\+h$>$}\newline
{\ttfamily \#include $<$Wi\+Fi\+Udp.\+h$>$}\newline
{\ttfamily \#include $<$NTPClient.\+h$>$}\newline
{\ttfamily \#include $<$lvgl.\+h$>$}\newline
{\ttfamily \#include \char`\"{}nostr.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Bitcoin.\+h\char`\"{}}\newline
Include dependency graph for nwc.\+h\+:
% FIG 0
This graph shows which files directly or indirectly include this file\+:
% FIG 1
\doxysubsection*{Namespaces}
\begin{DoxyCompactItemize}
\item 
namespace \mbox{\hyperlink{namespace_n_w_c}{NWC}}
\item 
namespace \mbox{\hyperlink{namespace_n_w_c_1_1_config}{NWC\+::\+Config}}
\item 
namespace \mbox{\hyperlink{namespace_n_w_c_1_1_currency}{NWC\+::\+Currency}}
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef void($\ast$ \mbox{\hyperlink{namespace_n_w_c_a331436fb2caeba54627e342126185a74}{NWC\+::nwc\+\_\+status\+\_\+callback\+\_\+t}}) (bool connected, const String \&status)
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{namespace_n_w_c_a1c1d9172198a60da5d26688610968af8}{NWC\+::init}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a441487b7105f0c9cc662578d3600a034}{NWC\+::cleanup}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a99fdb7cc9f77370099522b3461ad84ab}{NWC\+::setup\+Data}} (const String \&url)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a72c06bdc692eac76bc21d4e73ce31349}{NWC\+::connect\+To\+Relay}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a342261f4ab3c85e7f89e8664b3311bf4}{NWC\+::restart\+Connection}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a88a8c82c8be5fc4c9ef6fa6f35b8a581}{NWC\+::disconnect}} ()
\item 
bool \mbox{\hyperlink{namespace_n_w_c_a15d4ed6dee9570b25a02a7fe34b9ece0}{NWC\+::is\+Initialized}} ()
\item 
bool \mbox{\hyperlink{namespace_n_w_c_aa2e749abffc8f1f4995bb52e3a6e8f47}{NWC\+::is\+Connected}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a12351ef57b22b79c192426979a938cc3}{NWC\+::load\+Url\+From\+Preferences}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a14fff083f2b310dfa50fad5e75510d22}{NWC\+::save\+Url\+To\+Preferences}} (const String \&url)
\item 
String \mbox{\hyperlink{namespace_n_w_c_ae645013edf0be68e8ea57f7130b136e4}{NWC\+::get\+Pairing\+Url}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a66b3bd6f1962777af5011df44dcf85e7}{NWC\+::set\+Pairing\+Url}} (const String \&url)
\item 
void \mbox{\hyperlink{namespace_n_w_c_aa137fc6f2c6092d4b9464c4246e851c6}{NWC\+::websocket\+Event}} (WStype\+\_\+t type, uint8\+\_\+t $\ast$payload, size\+\_\+t length)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a18f2ad2c95003389637ea9d84d18d5cf}{NWC\+::handle\+Websocket\+Message}} (void $\ast$arg, uint8\+\_\+t $\ast$data, size\+\_\+t len)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a870035d4e450773ec8a50d0bf0b81702}{NWC\+::reset\+Websocket\+Fragment\+State}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a2ea8f4d93d51274c1ed01f85eadeb3c1}{NWC\+::handle\+Nwc\+Response\+Event}} (uint8\+\_\+t $\ast$data)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a964d9daf0d78f7807e9dffc07d0b00df}{NWC\+::handle\+Nwc\+Nip04\+Notification\+Event}} (uint8\+\_\+t $\ast$data)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a226efbf68836ffd12773687ebece1f06}{NWC\+::handle\+Nwc\+Nip44\+Notification\+Event}} (uint8\+\_\+t $\ast$data)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a5d747ef50eeb74cee5612fd939452183}{NWC\+::make\+Invoice}} (float amount, const String \&currency)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a86b3f2617b12ae02c2e60ea915a43076}{NWC\+::send\+Invoice\+Lookup\+Request}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a209d5a499b7718c1a0d5984a191091a9}{NWC\+::start\+Invoice\+Notification\+Watchdog}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a9a72ecf2c1ad80aafcb1d1a79651d0aa}{NWC\+::stop\+Invoice\+Notification\+Watchdog}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a1c4b50b7a22b309f6b6f3ddcf9f32a74}{NWC\+::start\+Invoice\+Lookup\+Timer}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a1dd636b9104cd24b5d2fbd91329a67cd}{NWC\+::stop\+Invoice\+Lookup\+Timer}} ()
\item 
String \mbox{\hyperlink{namespace_n_w_c_ac8bb8a5bfcd2f30e2e35458ceeac24cd}{NWC\+::get\+Current\+Invoice}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a4e5666c5f59ca4d455e2148a3f06d329}{NWC\+::set\+Current\+Invoice}} (const String \&invoice)
\item 
void \mbox{\hyperlink{namespace_n_w_c_aef169814af2af3b5a32f4f0c30456385}{NWC\+::fetch\+Bitcoin\+Prices}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a6084bca944be2b2f16e57728dbbc64dc}{NWC\+::update\+Prices\+From\+Json}} (const String \&json\+Response)
\item 
int \mbox{\hyperlink{namespace_n_w_c_adf733f5382e816e1e45d39bf3e3ec04f}{NWC\+::calculate\+Sats\+From\+Amount}} (float amount, const String \&currency)
\item 
long $\ast$ \mbox{\hyperlink{namespace_n_w_c_a2d1e53d84c677b6b30da4a0b845352d1}{NWC\+::get\+Bitcoin\+Prices}} ()
\item 
bool \mbox{\hyperlink{namespace_n_w_c_a26bfd6ee56d21e22fc6caa559711c011}{NWC\+::are\+Prices\+Loaded}} ()
\item 
unsigned long \mbox{\hyperlink{namespace_n_w_c_aeaebbdb90bbebb939c1149ad621e9455}{NWC\+::get\+Last\+Price\+Update}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_acaa1e327e2f86e4e3101cc552c8ed24c}{NWC\+::attempt\+Reconnection\+If\+Needed}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a28e8eb156bed73d6466b37fe3d81241d}{NWC\+::update\+Relay\+Status\+Display}} (bool connected)
\item 
void \mbox{\hyperlink{namespace_n_w_c_acd1483629fef32437ab3d58cbfe11318}{NWC\+::update\+Time}} ()
\item 
unsigned long \mbox{\hyperlink{namespace_n_w_c_a08f91f132a611875988ba75c6d196318}{NWC\+::get\+Unix\+Timestamp}} ()
\item 
unsigned long \mbox{\hyperlink{namespace_n_w_c_a75a93db0e7805efd74eb67c4c458a66f}{NWC\+::get\+Boot\+Timestamp}} ()
\item 
NTPClient \& \mbox{\hyperlink{namespace_n_w_c_a8ef3c6df0ec5f0c7cbec9ee9a180db8f}{NWC\+::get\+Time\+Client}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_af6a6e3b53f844f01887bfa71344c836f}{NWC\+::send\+Ping}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a10d04b654063bcec6d1bcf528fb3a24d}{NWC\+::process\+Loop}} ()
\item 
bool \mbox{\hyperlink{namespace_n_w_c_acbeaaf60838294051dacb43171560fbf}{NWC\+::is\+Fragment\+In\+Progress}} ()
\item 
void \mbox{\hyperlink{namespace_n_w_c_a952c9d2aa4e8bedd3484fd68feefab9b}{NWC\+::handle\+Fragment}} (uint8\+\_\+t $\ast$payload, size\+\_\+t length, bool is\+Binary, bool is\+Last)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a8a33716d68e6fc7b598f13474a8aa3d0}{NWC\+::invoice\+Lookup\+Timer\+Callback}} (lv\+\_\+timer\+\_\+t $\ast$timer)
\item 
void \mbox{\hyperlink{namespace_n_w_c_a8f8ca7e2372b1dce642bba4ad410d190}{NWC\+::invoice\+Notification\+Watchdog\+Callback}} (lv\+\_\+timer\+\_\+t $\ast$timer)
\item 
void \mbox{\hyperlink{namespace_n_w_c_aa67b7139a1355f5f43c75c014796dd80}{NWC\+::set\+Status\+Callback}} (nwc\+\_\+status\+\_\+callback\+\_\+t callback)
\item 
void \mbox{\hyperlink{namespace_n_w_c_ac164a3889940ecbe838a8d52cd0dd2f7}{NWC\+::set\+Relay\+Status\+Label}} (lv\+\_\+obj\+\_\+t $\ast$label)
\item 
Web\+Sockets\+Client \& \mbox{\hyperlink{namespace_n_w_c_aee89013cd6a45b02d0f848879e96da16}{NWC\+::get\+Web\+Socket\+Client}} ()
\item 
String \mbox{\hyperlink{namespace_n_w_c_abb2a09968c5b268eef33006b22a32c12}{NWC\+::get\+Relay\+Url}} ()
\item 
String \mbox{\hyperlink{namespace_n_w_c_a8b64dfdf4a3cc775ec132ba31825a340}{NWC\+::get\+Wallet\+Pub\+Key}} ()
\item 
String \mbox{\hyperlink{namespace_n_w_c_a8819a0f510ab7fcb3dc3381db3a0eab6}{NWC\+::get\+Nsec\+Hex}} ()
\item 
String \mbox{\hyperlink{namespace_n_w_c_a21272097203f647bcfc29821d1035eb8}{NWC\+::get\+Npub\+Hex}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const unsigned long \mbox{\hyperlink{namespace_n_w_c_1_1_config_a75491996e49293c99932d65296266d67}{NWC\+::\+Config\+::\+WS\+\_\+\+PING\+\_\+\+INTERVAL}} = 5000
\item 
const unsigned long \mbox{\hyperlink{namespace_n_w_c_1_1_config_a4002f51fd948fdd9d651c3fe1b1f5808}{NWC\+::\+Config\+::\+WS\+\_\+\+FRAGMENT\+\_\+\+TIMEOUT}} = 30000
\item 
const size\+\_\+t \mbox{\hyperlink{namespace_n_w_c_1_1_config_a8ee52e5b8334929242fef64c1f96d027}{NWC\+::\+Config\+::\+WS\+\_\+\+MAX\+\_\+\+FRAGMENT\+\_\+\+SIZE}} = 1024 $\ast$ 1024
\item 
const unsigned long \mbox{\hyperlink{namespace_n_w_c_1_1_config_a6cb0b6978cd4f197e98c536125a13fb9}{NWC\+::\+Config\+::\+PRICE\+\_\+\+UPDATE\+\_\+\+INTERVAL}} = 300000
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_config_af356f7ca50fa683a6ffe1b57ec250336}{NWC\+::\+Config\+::\+MAX\+\_\+\+CURRENCIES}} = 8
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_abf207ba57921bb549a068700c202c9f2}{NWC\+::\+Currency\+::\+USD}} = 0
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_a4868a6697ddfd1fa53b7cedf10e40356}{NWC\+::\+Currency\+::\+EUR}} = 1
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_a3f8f160fb742134b199692a82bd419c0}{NWC\+::\+Currency\+::\+GBP}} = 2
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_ab2da9533ddd7b9fd2e01c8c32281901a}{NWC\+::\+Currency\+::\+CAD}} = 3
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_a5b003baf292042a6ccf3d56dedab8754}{NWC\+::\+Currency\+::\+CHF}} = 4
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_aa6b84139f59085564cd68a0e063d1643}{NWC\+::\+Currency\+::\+AUD}} = 5
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_a77c8f472c8dd21ea02788aae0ee4d3f0}{NWC\+::\+Currency\+::\+JPY}} = 6
\item 
const int \mbox{\hyperlink{namespace_n_w_c_1_1_currency_afa58df12dc21a7990fe2344def8b455e}{NWC\+::\+Currency\+::\+CNY}} = 7
\end{DoxyCompactItemize}
